# 映界 (Movie Realm) - 电影管理系统

一个功能丰富的电影信息管理系统，提供电影浏览、管理、收藏等功能。系统采用Java Web技术栈开发，基于Servlet和JSP技术，使用MySQL数据库存储电影和用户信息。

## 功能特性

- **电影管理**：支持电影的增删改查功能
- **用户系统**：用户登录、注册功能
- **在线用户**：实时显示在线用户数量
- **电影收藏**：用户可收藏喜欢的电影
- **电影搜索**：按关键词搜索电影功能
- **分页展示**：电影列表支持分页浏览
- **响应式界面**：适配不同设备的现代化UI设计
- **数据库集成**：使用MySQL存储电影和用户数据

## 技术栈

- **后端**：Java Servlet, JSP
- **前端**：HTML, CSS, JavaScript, jQuery
- **数据库**：MySQL
- **连接池**：Apache DBCP2
- **JSON处理**：Jackson
- **Web框架**：Bootstrap 5
- **构建工具**：Maven (隐含)

## 项目结构

```
Movie/
├── src/
│   └── cn/edu/swu/xjj/          # Java源代码
│       ├── auth/                 # 认证相关
│       ├── base/                 # 基础类
│       ├── like/                 # 点赞功能
│       ├── listener/             # 监听器
│       ├── movie/                # 电影相关业务
│       ├── repo/                 # 数据访问层
│       ├── servlet/              # Servlet控制器
│       └── utils/                # 工具类
├── WebRoot/                      # Web资源目录
│   ├── assets/                   # 静态资源
│   ├── css/                      # 样式文件
│   ├── js/                       # JavaScript文件
│   ├── lib/                      # 第三方库
│   ├── upload/                   # 上传文件目录
│   ├── WEB-INF/                  # Web应用配置
│   │   ├── classes/              # 编译后的类文件
│   │   ├── lib/                  # 依赖库
│   │   └── web.xml               # Web应用配置文件
│   ├── index.html                # 首页
│   ├── login.html                # 登录页面
│   ├── register.html             # 注册页面
│   ├── movies.html               # 电影列表页面
│   └── ...                       # 其他页面
└── out/                          # 编译输出目录
```

## 主要模块

### 1. 数据访问层 (repo)
- `DatabaseService`：数据库连接池管理，使用Apache DBCP2
- `MovieResultSetVisitor`：处理SQL查询结果到Movie对象的转换

### 2. 电影业务层 (movie)
- `Movie`：电影实体类，包含ID、标题、年份、地区、类型、简介、评分、图片等属性
- `MovieService`：提供JSON格式的电影数据服务，支持分页
- `MovieServlet`：生成HTML格式的电影列表页面
- `MoviePage`：分页数据封装类

### 3. 认证模块 (auth)
- 用户登录、注册、会话管理

### 4. 收藏模块 (like)
- 电影收藏功能，记录用户收藏的电影

### 5. 工具模块 (utils)
- `HtmlHelper`：HTML生成工具类

## 使用说明

1. **注册/登录**：访问首页点击"登录"，没有账号可先注册
2. **浏览电影**：登录后可浏览所有电影，支持分页
3. **搜索电影**：在电影列表页面使用搜索功能查找特定电影
4. **收藏电影**：点击电影卡片上的"收藏"按钮添加到个人收藏
5. **管理电影**：管理员可以添加、编辑或删除电影信息

## 开发说明

### 添加新功能
1. 在相应的包中创建新的servlet类
2. 配置@WebServlet注解指定URL路径
3. 在前端页面添加相关链接或表单

### 数据库表结构
系统会在首次启动时自动创建数据库表结构。如需手动创建，请参考项目中的数据库初始化脚本。

## 注意事项

- 数据库连接信息请根据实际环境修改
- 文件上传功能需要确保upload目录有写入权限
- 生产环境建议使用更安全的密码策略
- 注意处理SQL注入等安全问题